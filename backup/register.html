<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    
    <!-- Links -->
    <link rel="stylesheet" href="/Gearchanix/GEARCHANIX-MAIN/gearchanix/src/assets/css/styles.css">
    <link rel="stylesheet" href="/Gearchanix/GEARCHANIX-MAIN/gearchanix/src/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css">
    <title>Register</title>

    <style>
        /* Additional styles for the password input and eye icon */
        .password-container {
            position: relative;
        }

        .eye-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
        }
    </style>
</head>

<body id="page-top"> <!-- Corrected ID selector -->
    <div class="d-flex flex-column" id="content-wrapper">
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-custom shadow mb-4 topbar static-top">
                <div class="container-fluid">
                    <a class="navbar-brand d-flex align-items-center" href="#">
                        <img src="/Gearchanix/GEARCHANIX-MAIN/gearchanix/src/assets/img/PUPLogo.png" alt="PUP Logo">
                        <div class="ms-3">
                            <span class="d-block univ-name">Polytechnic University of the Philippines</span>
                            <span class="d-block sub-text">The Country's 1st PolytechnicU</span>
                        </div>
                    </a>
                </div>
            </nav>

            <!-- Main Page -->
            <div class="container">
                <div class="card shadow-lg o-hidden border-0 my-5">
                    <div class="card-body p-0">
                        <div class="row">
                            <div class="col-lg-5 d-none d-lg-flex">
                                <div class="flex-grow-1 bg-register-image" style="background-image: url('/assets/img/dogs/image2.jpeg?h=a0a7d00bcd8e4f84f4d8ce636a8f94d4');"></div>
                            </div>
                            <div class="col-lg-7">
                                <div class="p-5">
                                    <div class="text-center">
                                        <h4 class="text-dark mb-4">Register</h4>
                                    </div>
                                    <form class="user" id="registrationForm" action="register.php" method="POST">
                                        <!-- First Name, Middle Name, Last Name -->
                                        <div class="row mb-3">
                                            <div class="col-sm-4">
                                                <input class="form-control form-control-user" type="text" id="FirstName" placeholder="First Name" name="first_name" required>
                                            </div>
                                            <div class="col-sm-4">
                                                <input class="form-control form-control-user" type="text" id="MiddleName" placeholder="Middle Name" name="middle_name">
                                            </div>
                                            <div class="col-sm-4">
                                                <input class="form-control form-control-user" type="text" id="LastName" placeholder="Last Name" name="last_name" required>
                                            </div>
                                        </div>
                                        
                                        <!-- Contact Number, Email -->
                                        <div class="row mb-3">
                                            <div class="col-sm-6">
                                                <input class="form-control form-control-user" type="text" id="ContactNumber" placeholder="Contact Number" name="contact_number" required>
                                            </div>
                                            <div class="col-sm-6">
                                                <input class="form-control form-control-user" type="email" id="exampleInputEmail" aria-describedby="emailHelp" placeholder="Email Address" name="email" required>
                                            </div>
                                        </div>
                                        
                                        <!-- Password -->
                                        <div class="mb-3 password-container">
                                            <input class="form-control form-control-user" type="password" id="password" placeholder="Password" name="password" required>
                                            <i class="fas fa-eye eye-icon" id="togglePassword" onclick="togglePasswordVisibility()"></i>
                                        </div>
                                        
                                        <!-- Register Button -->
                                        <button class="btn btn-primary d-block btn-user w-100" type="submit">Register</button>
                                    </form>
                                    
                                    <!-- Login Link -->
                                    <div class="text-center">
                                        Already have an account? 
                                        <a class="small login" href="/Gearchanix/GEARCHANIX-MAIN/gearchanix/public/pages/login-reg/login.html"> Login</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Success Modal for Registration -->
            <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="successModalLabel">Registration Successful</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            You have registered successfully! 
                            Please wait for an email for role confirmation.
                            Thank you!
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="bg-white sticky-footer">
                <div class="container my-auto">
                    <div class="text-center my-auto copyright"><span>Copyright Â© Gearchanix 2024</span></div>
                </div>
            </footer>
        </div>

        <!-- Scripts -->
        <script src="/Gearchanix/GEARCHANIX-main/gearchanix/src/assets/js/validatepassword.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>  
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="/Gearchanix/GEARCHANIX-main/gearchanix/src/assets/js/assets/js/bs-init.js"></script>
        <script src="/Gearchanix/GEARCHANIX-main/gearchanix/src/assets/js/assets/js/theme.js"></script>
        

        <!-- jQuery -->

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
   $(document).ready(function() {
                // Bind the form submission event
                $('#registrationForm').on('submit', function(e) {
                    // Validate password before submission
                    if (!validatePassword()) {
                        e.preventDefault(); // Prevent submission if validation fails
                        return;
                    }

                    e.preventDefault(); // Prevent default form submission

        $.ajax({
            url: 'register.php', // URL of the PHP script
            type: 'POST',
            data: $(this).serialize(), // Serialize form data
            dataType: 'json', // Expect a JSON response
            success: function(response) {
                if (response.success) {
                    const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                    successModal.show();
                    // Redirect to login page after modal is closed
                     successModal._element.addEventListener('hidden.bs.modal', function () {
                        window.location.href = '/gearchanix/gearchanix-main/gearchanix/public/pages/login-reg/login.html'; // Redirect to login page
                    });
                } else {
                    alert('Error during registration: ' + (response.error || 'Unknown error'));
                }
            },
            error: function(xhr, status, error) {
                console.error('AJAX Error:', error);
                alert('Error during registration: ' + xhr.responseText);
            }
        });
    });
});

</script>

       
    </body>
</html>
